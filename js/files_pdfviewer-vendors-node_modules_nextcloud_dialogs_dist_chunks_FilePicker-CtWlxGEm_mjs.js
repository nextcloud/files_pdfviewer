"use strict";(self.webpackChunkfiles_pdfviewer=self.webpackChunkfiles_pdfviewer||[]).push([["node_modules_nextcloud_vue_dist_components_NcSelect_index_mjs","vendors-node_modules_nextcloud_dialogs_dist_chunks_FilePicker-CtWlxGEm_mjs"],{5028(e,t,i){i.d(t,{default:()=>kt});var l,a=i(641),n=i(33),o=i(953),r=i(3751),s=i(1338),c=i(4434),u=i(1807),d=i(240),v=i(8751),p=i(5446),f=i(6296),m=i(997),k=i(9165);!function(e){e[e.User=0]="User",e[e.Group=1]="Group",e[e.Link=3]="Link",e[e.Email=4]="Email",e[e.Remote=6]="Remote",e[e.Team=7]="Team",e[e.Guest=8]="Guest",e[e.RemoteGroup=9]="RemoteGroup",e[e.Room=10]="Room",e[e.Deck=12]="Deck",e[e.FederatedGroup=14]="FederatedGroup",e[e.ScienceMesh=15]="ScienceMesh"}(l||(l={}));var h=i(2510),g=i(3016),_=i(7503),w=i(6802);function y(e,t,i){const l=`#initial-state-${e}-${t}`;if(window._nc_initial_state?.has(l))return window._nc_initial_state.get(l);window._nc_initial_state||(window._nc_initial_state=new Map);const a=document.querySelector(l);if(null===a){if(void 0!==i)return i;throw new Error(`Could not find initial state ${t} of ${e}`)}try{const e=JSON.parse(atob(a.value));return window._nc_initial_state.set(l,e),e}catch(l){if(console.error("[@nextcloud/initial-state] Could not parse initial state",{key:t,app:e,error:l}),void 0!==i)return i;throw new Error(`Could not parse initial state ${t} of ${e}`,{cause:l})}}var b=i(3814),C=i(1428);"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),Object.prototype.toString;function E(e){const t=Object.create(null);return i=>t[i]||(t[i]=e(i))}const L=/\B([A-Z])/g,R=(E((e=>e.replace(L,"-$1").toLowerCase())),/-(\w)/g);E((e=>e.replace(R,((e,t)=>t?t.toUpperCase():""))));const F=o.BA;var X=i(7240),W=i(5262),z=i(6886),B=i(6247),x=i(1777),V=i(3710),S=i(9455);function N(...e){return I(...e)}function I(...e){if(arguments.length<1)return"";const t=e.filter((e=>e.length>0));if(t.length<1)return"";const i=t[t.length-1],l="/"===t[0].charAt(0),a="/"===i.charAt(i.length-1),n=t.reduce(((e,t)=>e.concat(t.split("/"))),[]);let o=!l;const r=n.reduce(((e,t)=>""===t?e:o?(o=!1,e+t):e+"/"+t),"");return a?r+"/":r}var P=i(6117);const A={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},M=["aria-hidden","aria-label"],H=["fill","width","height"],K={d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"},$={key:0};const D=(0,d._)(A,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon file-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",K,[i.title?((0,a.uX)(),(0,a.CE)("title",$,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,H))],16,M)}]]),U={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Q=["aria-hidden","aria-label"],G=["fill","width","height"],Z={d:"M7,10L12,15L17,10H7Z"},J={key:0};const T=(0,d._)(U,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon menu-down-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",Z,[i.title?((0,a.uX)(),(0,a.CE)("title",J,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,G))],16,Q)}]]),j={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},O=["aria-hidden","aria-label"],q=["fill","width","height"],Y={d:"M7,15L12,10L17,15H7Z"},ee={key:0};const te=(0,d._)(j,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon menu-up-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",Y,[i.title?((0,a.uX)(),(0,a.CE)("title",ee,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,q))],16,O)}]]),ie={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},le=["aria-hidden","aria-label"],ae=["fill","width","height"],ne={d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"},oe={key:0};const re=(0,d._)(ie,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon folder-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",ne,[i.title?((0,a.uX)(),(0,a.CE)("title",oe,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,ae))],16,le)}]]),se={"file-picker__file-icon":"_file-picker__file-icon_3v9zx_9","file-picker__file-icon--primary":"_file-picker__file-icon--primary_3v9zx_21","file-picker__file-icon-overlay":"_file-picker__file-icon-overlay_3v9zx_25"},ce=(0,a.pM)({__name:"FilePreview",props:{node:{},cropImagePreviews:{type:Boolean}},setup(e){const t=e,i=(0,o.KR)(se),{previewURL:r,previewLoaded:s}=(0,g.u)((0,o.lW)(t,"node"),(0,a.EW)((()=>({cropPreview:t.cropImagePreviews})))),c=(0,a.EW)((()=>t.node.type===v.pt.File)),u=(0,a.EW)((()=>{if(t.node.type!==v.pt.Folder)return null;if(1===t.node.attributes?.["is-encrypted"])return k.kHm;if(t.node.attributes?.["is-tag"])return k.HzW;const e=Object.values(t.node.attributes?.["share-types"]||{}).flat();if(e.some((e=>e===l.Link||e===l.Email)))return k.Brj;if(e.length>0)return k.IyB;switch(t.node.attributes?.["mount-type"]){case"external":case"external-session":return k.jUz;case"group":return k.kOJ;case"shared":return k.IyB}return null}));return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{style:(0,n.Tr)((0,o.R1)(s)?{backgroundImage:`url(${(0,o.R1)(r)})`}:void 0),class:(0,n.C4)(i.value["file-picker__file-icon"])},[(0,o.R1)(s)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[c.value?((0,a.uX)(),(0,a.Wv)(D,{key:0,size:32})):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[u.value?((0,a.uX)(),(0,a.Wv)((0,o.R1)(h.A),{key:0,class:(0,n.C4)(i.value["file-picker__file-icon-overlay"]),inline:"",path:u.value,size:16},null,8,["class","path"])):(0,a.Q3)("",!0),(0,a.bF)(re,{class:(0,n.C4)(i.value["file-picker__file-icon--primary"]),size:32},null,8,["class"])],64))],64))],6))}}),ue=["tabindex","aria-selected","data-filename"],de={class:"row-name"},ve={class:"file-picker__name-container","data-testid":"row-name"},pe=["title","textContent"],fe=["textContent"],me={class:"row-size"},ke={class:"row-modified"},he=(0,a.pM)({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:{},cropImagePreviews:{type:Boolean}},emits:["update:selected","enterDirectory"],setup(e,{emit:t}){const i=e,l=t,s=(0,a.EW)((()=>i.node.mtime??0)),c=(0,a.EW)((()=>i.node.attributes?.displayName||i.node.basename.slice(0,i.node.extension?-i.node.extension.length:void 0))),u=(0,a.EW)((()=>i.node.extension)),d=(0,a.EW)((()=>i.node.type===v.pt.Folder)),p=(0,a.EW)((()=>i.canPick&&(i.allowPickDirectory||!d.value))),k=(0,a.EW)((()=>(i.node.permissions&v.aX.READ)===v.aX.READ));function h(){p.value&&l("update:selected",!i.selected)}function g(){d.value?k.value&&l("enterDirectory",i.node):h()}function w(e){"Enter"===e.key&&g()}return(t,i)=>((0,a.uX)(),(0,a.CE)("tr",(0,a.v6)({tabindex:e.showCheckbox&&!d.value?void 0:0,"aria-selected":p.value?e.selected:void 0,class:["file-picker__row",[{"file-picker__row--selected":e.selected&&!e.showCheckbox,"file-picker__row--not-navigatable":d.value&&!k.value,"file-picker__row--not-pickable":!p.value}]],"data-filename":e.node.basename,"data-testid":"file-list-row"},(0,a.Tb)({click:g,...!e.showCheckbox||d.value?{keydown:w}:{}},!0)),[e.showCheckbox?((0,a.uX)(),(0,a.CE)("td",{key:0,class:"row-checkbox",onClick:(0,r.D$)((()=>{}),["stop"])},[(0,a.bF)((0,o.R1)(f.A),{"aria-label":(0,o.R1)(_.t)("Select the row for {nodename}",{nodename:c.value}),disabled:!p.value,"data-testid":"row-checkbox","model-value":e.selected,"onUpdate:modelValue":h},null,8,["aria-label","disabled","model-value"])])):(0,a.Q3)("",!0),(0,a.Lk)("td",de,[(0,a.Lk)("div",ve,[(0,a.bF)(ce,{node:e.node,"crop-image-previews":e.cropImagePreviews},null,8,["node","crop-image-previews"]),(0,a.Lk)("div",{class:"file-picker__file-name",title:c.value,textContent:(0,n.v_)(c.value)},null,8,pe),(0,a.Lk)("div",{class:"file-picker__file-extension",textContent:(0,n.v_)(u.value)},null,8,fe)])]),(0,a.Lk)("td",me,(0,n.v_)((0,o.R1)(v.v7)(e.node.size||0)),1),(0,a.Lk)("td",ke,[(0,a.bF)((0,o.R1)(m.A),{timestamp:s.value,"ignore-seconds":""},null,8,["timestamp"])])],16,ue))}}),ge=(0,d._)(he,[["__scopeId","data-v-a5daea8d"]]),_e={"aria-hidden":"true",class:"file-picker__row loading-row"},we={key:0,class:"row-checkbox"},ye={class:"row-name"},be={class:"row-wrapper"},Ce=(0,a.pM)({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup:e=>(t,i)=>((0,a.uX)(),(0,a.CE)("tr",_e,[e.showCheckbox?((0,a.uX)(),(0,a.CE)("td",we,[...i[0]||(i[0]=[(0,a.Lk)("span",null,null,-1)])])):(0,a.Q3)("",!0),(0,a.Lk)("td",ye,[(0,a.Lk)("div",be,[(0,a.Lk)("span",{class:(0,n.C4)((0,o.R1)(se)["file-picker__file-icon"])},null,2),i[1]||(i[1]=(0,a.Lk)("span",null,null,-1))])]),i[2]||(i[2]=(0,a.Lk)("td",{class:"row-size"},[(0,a.Lk)("span")],-1)),i[3]||(i[3]=(0,a.Lk)("td",{class:"row-modified"},[(0,a.Lk)("span")],-1))]))}),Ee=(0,d._)(Ce,[["__scopeId","data-v-1f96131b"]]);function Le(){const e=y("files","config",null),t=(0,o.KR)(e?.show_hidden??!0),i=(0,o.KR)(e?.sort_favorites_first??!0),l=(0,o.KR)(e?.crop_image_previews??!0);return(0,a.sV)((async()=>{if((0,C.f)())_.l.debug("Skip loading files settings - currently on public share");else try{const{data:e}=await w.Ay.get((0,b.Jv)("/apps/files/api/v1/configs"));t.value=e?.data?.show_hidden??!1,i.value=e?.data?.sort_favorites_first??!0,l.value=e?.data?.crop_image_previews??!0}catch(e){_.l.error("Could not load files settings",e),(0,_.s)((0,_.t)("Could not load files settings"))}})),{showHiddenFiles:t,sortFavoritesFirst:i,cropImagePreviews:l}}const Re={key:0,class:"row-checkbox"},Fe={class:"hidden-visually"},Xe=["aria-sort"],We={class:"header-wrapper"},ze={key:2,style:{width:"44px"}},Be=["aria-sort"],xe={key:2,style:{width:"44px"}},Ve=["aria-sort"],Se={key:2,style:{width:"44px"}},Ne=(0,a.pM)({__name:"FileList",props:(0,a.zz)({currentView:{},multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:{},canPick:{type:Function}},{path:{required:!0},pathModifiers:{},selectedFiles:{required:!0},selectedFilesModifiers:{}}),emits:["update:path","update:selectedFiles"],setup(e){const t=(0,a.fn)(e,"path"),i=(0,a.fn)(e,"selectedFiles"),l=e,r=(0,o.KR)(),{currentConfig:s}=function(e){const t=e=>"asc"===e?"ascending":"desc"===e?"descending":"none",i=y("files","viewConfigs",null),l=(0,o.KR)({sortBy:i?.files?.sorting_mode??"basename",order:t(i?.files?.sorting_direction??"asc")}),n=(0,o.KR)({sortBy:i?.recent?.sorting_mode??"basename",order:t(i?.recent?.sorting_direction??"asc")}),r=(0,o.KR)({sortBy:i?.favorites?.sorting_mode??"basename",order:t(i?.favorites?.sorting_direction??"asc")});(0,a.sV)((async()=>{if((0,C.f)())_.l.debug("Skip loading files views - currently on public share");else try{const{data:e}=await w.Ay.get((0,b.Jv)("/apps/files/api/v1/views"));l.value={sortBy:e?.data?.files?.sorting_mode??"basename",order:t(e?.data?.files?.sorting_direction)},r.value={sortBy:e?.data?.favorites?.sorting_mode??"basename",order:t(e?.data?.favorites?.sorting_direction)},n.value={sortBy:e?.data?.recent?.sorting_mode??"basename",order:t(e?.data?.recent?.sorting_direction)}}catch(e){_.l.error("Could not load files views",e),(0,_.s)((0,_.t)("Could not load files views"))}}));const s=(0,a.EW)((()=>"files"===F(e||"files")?l.value:"recent"===F(e)?n.value:r.value)),c=(0,a.EW)((()=>s.value.sortBy)),u=(0,a.EW)((()=>s.value.order));return{filesViewConfig:l,favoritesViewConfig:r,recentViewConfig:n,currentConfig:s,sortBy:c,order:u}}(l.currentView),c=(0,a.EW)((()=>r.value??s.value)),u=(0,a.EW)((()=>"basename"===c.value.sortBy?"none"===c.value.order?void 0:c.value.order:void 0)),d=(0,a.EW)((()=>"size"===c.value.sortBy?"none"===c.value.order?void 0:c.value.order:void 0)),m=(0,a.EW)((()=>"mtime"===c.value.sortBy?"none"===c.value.order?void 0:c.value.order:void 0));function k(e){c.value.sortBy===e?"ascending"===c.value.order?r.value={sortBy:c.value.sortBy,order:"descending"}:r.value={sortBy:c.value.sortBy,order:"ascending"}:r.value={sortBy:e,order:"ascending"}}const{sortFavoritesFirst:h,cropImagePreviews:g}=Le(),E=(0,a.EW)((()=>(0,v.ur)(l.files,{sortFoldersFirst:!0,sortFavoritesFirst:h.value,sortingOrder:"descending"===c.value.order?"desc":"asc",sortingMode:c.value.sortBy}))),L=(0,a.EW)((()=>l.files.filter((e=>l.allowPickDirectory||e.type!==v.pt.Folder)))),R=(0,a.EW)((()=>!l.loading&&i.value.length>0&&i.value.length>=L.value.length));function X(){i.value.length<L.value.length?i.value=[...L.value]:i.value=[]}function W(e){t.value=e.path}const z=(0,o.KR)(4),B=(0,o.KR)();{const e=()=>(0,a.dY)((()=>{const e=B.value?.parentElement?.children||[];let t=B.value?.parentElement?.clientHeight||450;for(let i=0;i<e.length;i++)B.value?.isSameNode(e[i])||(t-=e[i].clientHeight);z.value=Math.max(1,Math.floor((t-50)/50))}));(0,a.sV)((()=>{window.addEventListener("resize",e),e()})),(0,a.hi)((()=>{window.removeEventListener("resize",e)}))}return(t,r)=>((0,a.uX)(),(0,a.CE)("div",{ref_key:"fileContainer",ref:B,class:"file-picker__files"},[(0,a.Lk)("table",null,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[e.multiselect?((0,a.uX)(),(0,a.CE)("th",Re,[(0,a.Lk)("span",Fe,(0,n.v_)((0,o.R1)(_.t)("Select entry")),1),e.multiselect?((0,a.uX)(),(0,a.Wv)((0,o.R1)(f.A),{key:0,"aria-label":(0,o.R1)(_.t)("Select all entries"),"data-testid":"select-all-checkbox","model-value":R.value,"onUpdate:modelValue":X},null,8,["aria-label","model-value"])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("th",{"aria-sort":u.value,class:"row-name"},[(0,a.Lk)("div",We,[r[3]||(r[3]=(0,a.Lk)("span",{class:"file-picker__header-preview"},null,-1)),(0,a.bF)((0,o.R1)(p.A),{"data-test":"file-picker_sort-name",variant:"tertiary",wide:"",onClick:r[0]||(r[0]=e=>k("basename"))},{icon:(0,a.k6)((()=>["ascending"===u.value?((0,a.uX)(),(0,a.Wv)(te,{key:0,size:20})):"descending"===u.value?((0,a.uX)(),(0,a.Wv)(T,{key:1,size:20})):((0,a.uX)(),(0,a.CE)("span",ze))])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,n.v_)((0,o.R1)(_.t)("Name")),1)])),_:1})])],8,Xe),(0,a.Lk)("th",{"aria-sort":d.value,class:"row-size"},[(0,a.bF)((0,o.R1)(p.A),{variant:"tertiary",wide:"",onClick:r[1]||(r[1]=e=>k("size"))},{icon:(0,a.k6)((()=>["ascending"===d.value?((0,a.uX)(),(0,a.Wv)(te,{key:0,size:20})):"descending"===d.value?((0,a.uX)(),(0,a.Wv)(T,{key:1,size:20})):((0,a.uX)(),(0,a.CE)("span",xe))])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,n.v_)((0,o.R1)(_.t)("Size")),1)])),_:1})],8,Be),(0,a.Lk)("th",{"aria-sort":m.value,class:"row-modified"},[(0,a.bF)((0,o.R1)(p.A),{variant:"tertiary",wide:"",onClick:r[2]||(r[2]=e=>k("mtime"))},{icon:(0,a.k6)((()=>["ascending"===m.value?((0,a.uX)(),(0,a.Wv)(te,{key:0,size:20})):"descending"===m.value?((0,a.uX)(),(0,a.Wv)(T,{key:1,size:20})):((0,a.uX)(),(0,a.CE)("span",Se))])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,n.v_)((0,o.R1)(_.t)("Modified")),1)])),_:1})],8,Ve)])]),(0,a.Lk)("tbody",null,[e.loading?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(z.value,(t=>((0,a.uX)(),(0,a.Wv)(Ee,{key:t,"show-checkbox":e.multiselect},null,8,["show-checkbox"])))),128)):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(E.value,(t=>((0,a.uX)(),(0,a.Wv)(ge,{key:t.fileid||t.path,"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":(e.multiselect||0===i.value.length||i.value.includes(t))&&(void 0===e.canPick||e.canPick(t)),selected:i.value.includes(t),node:t,"crop-image-previews":(0,o.R1)(g),"onUpdate:selected":e=>function(e){i.value.includes(e)?i.value=i.value.filter((t=>t.path!==e.path)):l.multiselect?i.value=[...i.value,e]:i.value=[e]}(t),onEnterDirectory:W},null,8,["allow-pick-directory","show-checkbox","can-pick","selected","node","crop-image-previews","onUpdate:selected"])))),128))])])],512))}}),Ie=(0,d._)(Ne,[["__scopeId","data-v-38620705"]]),Pe={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ae=["aria-hidden","aria-label"],Me=["fill","width","height"],He={d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"},Ke={key:0};const $e=(0,d._)(Pe,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon home-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",He,[i.title?((0,a.uX)(),(0,a.CE)("title",Ke,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,Me))],16,Ae)}]]),De={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ue=["aria-hidden","aria-label"],Qe=["fill","width","height"],Ge={d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"},Ze={key:0};const Je=(0,d._)(De,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon plus-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",Ge,[i.title?((0,a.uX)(),(0,a.CE)("title",Ze,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,Qe))],16,Ue)}]]),Te=(0,a.pM)({__name:"FilePickerBreadcrumbs",props:{path:{},showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(e,{emit:t}){const i=e,l=t,n=(0,o.KR)(!1),r=(0,o.KR)(""),s=(0,a.rk)("nameInput");function c(){const e=r.value.trim(),t=s.value?.$el?.querySelector("input");let i="";return 0===e.length?i=(0,_.t)("Folder name cannot be empty."):e.includes("/")?i=(0,_.t)('"/" is not allowed inside a folder name.'):["..","."].includes(e)?i=(0,_.t)('"{name}" is an invalid folder name.',{name:e}):window.OC.config?.blacklist_files_regex&&e.match(window.OC.config?.blacklist_files_regex)&&(i=(0,_.t)('"{name}" is not an allowed folder name',{name:e})),t&&t.setCustomValidity(i),""===i}function u(){const e=r.value.trim();c()&&(n.value=!1,l("create-node",e),r.value="")}const d=(0,a.EW)((()=>i.path.split("/").filter((e=>""!==e)).map(((e,t,i)=>({name:e,path:"/"+i.slice(0,t+1).join("/")})))));return(t,i)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(B.N),{class:"file-picker__breadcrumbs"},(0,a.eX)({default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(z.N),{name:(0,o.R1)(_.t)("All files"),title:(0,o.R1)(_.t)("Home"),onClick:i[0]||(i[0]=e=>l("update:path","/"))},{icon:(0,a.k6)((()=>[(0,a.bF)($e,{size:20})])),_:1},8,["name","title"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.value,(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(z.N),{key:e.path,name:e.name,title:e.path,onClick:t=>l("update:path",e.path)},null,8,["name","title","onClick"])))),128))])),_:2},[e.showMenu?{name:"actions",fn:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(W.N),{open:n.value,"onUpdate:open":i[2]||(i[2]=e=>n.value=e),"aria-label":(0,o.R1)(_.t)("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":(0,o.R1)(_.t)("New"),variant:"secondary",onClose:i[3]||(i[3]=e=>r.value="")},{icon:(0,a.k6)((()=>[(0,a.bF)(Je,{size:20})])),default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(X.N),{ref_key:"nameInput",ref:s,modelValue:r.value,"onUpdate:modelValue":[i[1]||(i[1]=e=>r.value=e),c],label:(0,o.R1)(_.t)("New folder"),placeholder:(0,o.R1)(_.t)("New folder name"),onSubmit:u},{icon:(0,a.k6)((()=>[(0,a.bF)(re,{size:20})])),_:1},8,["modelValue","label","placeholder"])])),_:1},8,["open","aria-label","menu-name"])])),key:"0"}:void 0]),1024))}}),je=(0,d._)(Te,[["__scopeId","data-v-4e6fd4e4"]]),Oe={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},qe=["aria-hidden","aria-label"],Ye=["fill","width","height"],et={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},tt={key:0};const it=(0,d._)(Oe,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon close-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",et,[i.title?((0,a.uX)(),(0,a.CE)("title",tt,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,Ye))],16,qe)}]]),lt={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},at=["aria-hidden","aria-label"],nt=["fill","width","height"],ot={d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},rt={key:0};const st=(0,d._)(lt,[["render",function(e,t,i,l,o,r){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)(e.$attrs,{"aria-hidden":i.title?null:"true","aria-label":i.title,class:"material-design-icon magnify-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,a.uX)(),(0,a.CE)("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[(0,a.Lk)("path",ot,[i.title?((0,a.uX)(),(0,a.CE)("title",rt,(0,n.v_)(i.title),1)):(0,a.Q3)("",!0)])],8,nt))],16,at)}]]);const ct={key:0,class:"file-picker__side"},ut=(0,a.pM)({__name:"FilePickerNavigation",props:{currentView:{},filterString:{},isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(e,{emit:t}){const i=e,l=t,{availableViews:r}=function(e){const t=[{id:"files",label:(0,_.t)("All files"),icon:k.fEr},{id:"recent",label:(0,_.t)("Recent"),icon:k.NZC},{id:"favorites",label:(0,_.t)("Favorites"),icon:k.ZL5}],i=e.value?t.filter((({id:e})=>"files"===e)):t;return{allViews:t,availableViews:i}}((0,o.KR)(null===(0,x.HW)())),s=(0,a.EW)((()=>r.filter((e=>e.id===i.currentView))[0]??r[0])),c=e=>l("update:filterString",e);return(t,i)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)((0,o.R1)(S.A),{class:"file-picker__filter-input",label:(0,o.R1)(_.t)("Filter file list"),"show-trailing-button":!!e.filterString,"model-value":e.filterString,"onUpdate:modelValue":c,onTrailingButtonClick:i[0]||(i[0]=e=>c(""))},{"trailing-button-icon":(0,a.k6)((()=>[(0,a.bF)(it,{size:16})])),default:(0,a.k6)((()=>[(0,a.bF)(st,{size:16})])),_:1},8,["label","show-trailing-button","model-value"]),(0,o.R1)(r).length>1&&!e.disabledNavigation?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[e.isCollapsed?((0,a.uX)(),(0,a.Wv)((0,o.R1)(V.default),{key:1,"aria-label":(0,o.R1)(_.t)("Current view selector"),clearable:!1,searchable:!1,options:(0,o.R1)(r),"model-value":s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>l("update:currentView",e.id))},null,8,["aria-label","options","model-value"])):((0,a.uX)(),(0,a.CE)("ul",ct,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(r),(i=>((0,a.uX)(),(0,a.CE)("li",{key:i.id},[(0,a.bF)((0,o.R1)(p.A),{variant:e.currentView===i.id?"primary":"tertiary",wide:!0,onClick:e=>t.$emit("update:currentView",i.id)},{icon:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(h.A),{path:i.icon,size:20},null,8,["path"])])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,n.v_)(i.label),1)])),_:2},1032,["variant","onClick"])])))),128))]))],64)):(0,a.Q3)("",!0)],64))}}),dt=(0,d._)(ut,[["__scopeId","data-v-86223490"]]);function vt(e,t){const i=(0,v.H4)(),l=(0,o.IJ)([]),n=(0,o.IJ)(null),r=(0,o.KR)(!0),s=(0,o.KR)(null);async function c(){s.value&&s.value.cancel(),r.value=!0,"favorites"===e.value?s.value=(0,v.Q$)(i,t.value):"recent"===e.value?s.value=function(e){const t=new AbortController,i=Math.round(Date.now()/1e3)-1209600;return new P.CancelablePromise((async(l,a,n)=>{n((()=>t.abort()));try{const{data:a}=await e.search("/",{signal:t.signal,details:!0,data:(0,v.R3)(i)});l(a.results.map((e=>(0,v.Al)(e))))}catch(e){a(e)}}))}(i):s.value=function(e,t){const i=new AbortController;return new P.CancelablePromise((async(l,a,n)=>{n((()=>i.abort()));try{const a=(await e.getDirectoryContents(N(v.lJ,t),{signal:i.signal,details:!0,includeSelf:!0,data:(0,v.VL)()})).data.map((e=>(0,v.Al)(e)));l({contents:a.filter((({path:e})=>e!==t)),folder:a.find((({path:e})=>e===t))})}catch(e){a(e)}}))}(i,t.value);const a=await s.value;a&&("folder"in a?(n.value=a.folder,l.value=a.contents):(n.value=null,l.value=a),s.value=null,r.value=!1)}return(0,a.wB)([e,t],(()=>c())),(0,a.sV)((()=>c())),{isLoading:r,files:l,folder:n,loadFiles:c,createDirectory:async function(e){const a=N(t.value,e);await i.createDirectory(N(v.lJ,a));const n=await async function(e,t){const{data:i}=await e.stat(N(v.lJ,t),{details:!0,data:(0,v.VL)()});return(0,v.Al)(i)}(i,a);return l.value=[...l.value,n],n}}}const pt={class:"file-picker__main"},ft={key:1,class:"file-picker__view"},mt=(0,a.pM)({__name:"FilePicker",props:{buttons:{},name:{},allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},filterFn:{type:Function,default:void 0},canPickFn:{type:Function,default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!1},path:{default:void 0}},emits:["close"],setup(e,{emit:t}){const i=e,l=t,r=(0,o.KR)(!0),d=(0,o.KR)("files"),v=(0,o.KR)(window?.sessionStorage.getItem("NC.FilePicker.LastPath")||"/"),p=(0,o.KR)(""),f=(0,a.EW)({get:()=>"files"===d.value?p.value||i.path||v.value:"/",set:e=>{p.value=e}}),m=(0,o.IJ)([]),{files:k,folder:h,isLoading:g,loadFiles:w,createDirectory:y}=vt(d,f);(0,a.wB)([p],(()=>{void 0===i.path&&p.value&&window.sessionStorage.setItem("NC.FilePicker.LastPath",p.value),m.value=[]}));let b=!1;const C=(0,a.EW)((()=>{const e=0===m.value.length&&i.allowPickDirectory&&h.value?[h.value]:m.value;return("function"==typeof i.buttons?i.buttons(e,f.value,d.value):i.buttons).map((t=>({...t,disabled:t.disabled||g.value,callback:()=>{b=!0,async function(e,t){await e(t),l("close",t),b=!1}(t.callback,e)}})))}));const E=(0,a.EW)((()=>"favorites"===d.value?(0,_.t)("Favorites"):"recent"===d.value?(0,_.t)("Recent"):"")),L=(0,o.KR)(""),{isSupportedMimeType:R}=function(e){const t=(0,a.EW)((()=>e.value.map((e=>e.split("/")))));return{isSupportedMimeType:e=>{const i=e.split("/");return t.value.some((([e,t])=>!(i[0]!==e&&"*"!==e||i[1]!==t&&"*"!==t)))}}}((0,o.lW)(i,"mimetypeFilter"));(0,a.sV)((()=>w()));const{showHiddenFiles:F}=Le(),X=(0,a.EW)((()=>{let e=k.value;return F.value||(e=e.filter((e=>!e.basename.startsWith(".")))),i.mimetypeFilter.length>0&&(e=e.filter((e=>"folder"===e.type||e.mime&&R(e.mime)))),L.value&&(e=e.filter((e=>e.basename.toLowerCase().includes(L.value.toLowerCase())))),i.filterFn&&(e=e.filter((e=>i.filterFn(e)))),e})),W=(0,a.EW)((()=>"files"===d.value?(0,_.t)("Upload some content or sync with your devices!"):"recent"===d.value?(0,_.t)("Files and folders you recently modified will show up here."):(0,_.t)("Files and folders you mark as favorite will show up here.")));async function z(e){try{const t=await y(e);p.value=t.path,(0,s.Ic)("files:node:created",k.value.filter((t=>t.basename===e))[0])}catch(t){_.l.warn("Could not create new folder",{name:e,error:t}),(0,_.s)((0,_.t)("Could not create the new folder"))}}function B(e){e||b||l("close")}return(t,i)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(c.A),{open:r.value,"onUpdate:open":[i[6]||(i[6]=e=>r.value=e),B],buttons:C.value,name:e.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation"},{navigation:(0,a.k6)((({isCollapsed:t})=>[(0,a.bF)(dt,{"current-view":d.value,"onUpdate:currentView":i[0]||(i[0]=e=>d.value=e),"filter-string":L.value,"onUpdate:filterString":i[1]||(i[1]=e=>L.value=e),"is-collapsed":t,"disabled-navigation":e.disabledNavigation},null,8,["current-view","filter-string","is-collapsed","disabled-navigation"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",pt,["files"===d.value?((0,a.uX)(),(0,a.Wv)(je,{key:0,path:f.value,"onUpdate:path":i[2]||(i[2]=e=>f.value=e),"show-menu":e.allowPickDirectory,onCreateNode:z},null,8,["path","show-menu"])):((0,a.uX)(),(0,a.CE)("div",ft,[(0,a.Lk)("h3",null,(0,n.v_)(E.value),1)])),(0,o.R1)(g)||X.value.length>0?((0,a.uX)(),(0,a.Wv)(Ie,{key:2,path:f.value,"onUpdate:path":[i[3]||(i[3]=e=>f.value=e),i[5]||(i[5]=e=>d.value="files")],"selected-files":m.value,"onUpdate:selectedFiles":i[4]||(i[4]=e=>m.value=e),"allow-pick-directory":e.allowPickDirectory,"current-view":d.value,files:X.value,multiselect:e.multiselect,loading:(0,o.R1)(g),name:E.value,"can-pick":e.canPickFn},null,8,["path","selected-files","allow-pick-directory","current-view","files","multiselect","loading","name","can-pick"])):L.value?((0,a.uX)(),(0,a.Wv)((0,o.R1)(u.N),{key:3,name:(0,o.R1)(_.t)("No matching files"),description:(0,o.R1)(_.t)("No files matching your filter were found.")},{icon:(0,a.k6)((()=>[(0,a.bF)(D)])),_:1},8,["name","description"])):((0,a.uX)(),(0,a.Wv)((0,o.R1)(u.N),{key:4,name:(0,o.R1)(_.t)("No files in here"),description:W.value},{icon:(0,a.k6)((()=>[(0,a.bF)(D)])),_:1},8,["name","description"]))])])),_:1},8,["open","buttons","name"]))}}),kt=(0,d._)(mt,[["__scopeId","data-v-5287035b"]])},3710(e,t,i){i.r(t),i.d(t,{default:()=>l.N});var l=i(1288)},9455(e,t,i){i.d(t,{A:()=>l._});var l=i(4777)}}]);
//# sourceMappingURL=files_pdfviewer-vendors-node_modules_nextcloud_dialogs_dist_chunks_FilePicker-CtWlxGEm_mjs.js.map?v=072692b0126abbd47307